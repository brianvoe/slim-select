!function(e,t){if("object"==typeof exports&&"object"==typeof module)module.exports=t();else if("function"==typeof define&&define.amd)define([],t);else{var i=t();for(var s in i)("object"==typeof exports?exports:e)[s]=i[s]}}(window,function(){return function(e){var t={};function i(s){if(t[s])return t[s].exports;var n=t[s]={i:s,l:!1,exports:{}};return e[s].call(n.exports,n,n.exports,i),n.l=!0,n.exports}return i.m=e,i.c=t,i.d=function(e,t,s){i.o(e,t)||Object.defineProperty(e,t,{enumerable:!0,get:s})},i.r=function(e){"undefined"!=typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(e,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(e,"__esModule",{value:!0})},i.t=function(e,t){if(1&t&&(e=i(e)),8&t)return e;if(4&t&&"object"==typeof e&&e&&e.__esModule)return e;var s=Object.create(null);if(i.r(s),Object.defineProperty(s,"default",{enumerable:!0,value:e}),2&t&&"string"!=typeof e)for(var n in e)i.d(s,n,function(t){return e[t]}.bind(null,n));return s},i.n=function(e){var t=e&&e.__esModule?function(){return e.default}:function(){return e};return i.d(t,"a",t),t},i.o=function(e,t){return Object.prototype.hasOwnProperty.call(e,t)},i.p="./dist/",i(i.s=2)}([function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});function s(e){return void 0!==e.text||(console.error("Data object option must have at least have a text value. Check object: "+JSON.stringify(e)),!1)}t.default=class{constructor(e){this.contentOpen=!1,this.contentPosition="below",this.isOnChangeEnabled=!0,this.main=e.main,this.searchValue="",this.data=[],this.filtered=null,this.parseSelectData(),this.setSelectedFromSelect()}getObjectFromData(e,t="id"){for(let i=0;i<this.data.length;i++){if(t in this.data[i]&&String(this.data[i][t])===String(e))return this.data[i];if(this.data[i].hasOwnProperty("options")){const s=this.data[i];for(let i=0;i<s.options.length;i++)if(String(s.options[i][t])===String(e))return s.options[i]}}return null}getSelected(){let e=null;const t=[];for(let i=0;i<this.data.length;i++)if(this.data[i].hasOwnProperty("label")){if(this.data[i].hasOwnProperty("options")){const s=this.data[i].options;for(let i=0;i<s.length;i++)s[i].selected&&(this.main.config.isMultiple?t.push(s[i]):e=s[i])}}else this.data[i].selected&&(this.main.config.isMultiple?t.push(this.data[i]):e=this.data[i]);return this.main.config.isMultiple?t:e}removeFromSelected(e,t="id"){if(this.main.config.isMultiple){const i=[],s=this.getSelected();for(let n=0;n<s.length;n++)String(s[n][t])!==String(e)&&i.push(s[n][t]);this.setSelected(i,t)}}onDataChange(){this.main.onChange&&this.isOnChangeEnabled&&this.main.onChange(JSON.parse(JSON.stringify(this.getSelected())))}newOption(e){return{data:e.data?e.data:{},disabled:!!e.disabled&&e.disabled,display:!e.display||e.display,id:e.id?e.id:String(Math.floor(1e8*Math.random())),innerHTML:e.innerHTML?e.innerHTML:"",placeholder:e.placeholder?e.placeholder:"",selected:!!e.selected&&e.selected,text:e.text?e.text:"",value:e.value?e.value:""}}addToSelected(e,t="id"){if(this.main.config.isMultiple){const i=[],s=this.getSelected();for(let e=0;e<s.length;e++)i.push(s[e][t]);i.push(e),this.setSelected(i,t)}}setSelected(e,t="id"){for(let i=0;i<this.data.length;i++)if(this.data[i].hasOwnProperty("label")){if(this.data[i].hasOwnProperty("options")){const s=this.data[i].options;for(let i=0;i<s.length;i++)s[i].selected=this.shouldBeSelected(s[i],e,t)}}else this.data[i].selected=this.shouldBeSelected(this.data[i],e,t)}parseSelectData(){this.data=[];const e=this.main.select.element.childNodes;for(let t=0;t<e.length;t++)if("OPTGROUP"===e[t].nodeName){const i={label:e[t].label,options:[]},s=e[t].childNodes;for(let e=0;e<s.length;e++)"OPTION"===s[e].nodeName&&i.options.push(this.pullOptionData(s[e]));this.data.push(i)}else"OPTION"===e[t].nodeName&&this.data.push(this.pullOptionData(e[t]))}setSelectedFromSelect(){const e=this.main.select.element.options;if(this.main.config.isMultiple){const t=[];for(let i=0;i<e.length;i++){const s=e[i];s.selected&&t.push(this.getObjectFromData(s.value,"value").id)}this.setSelected(t,"id")}else if(-1!==e.selectedIndex){const t=e[e.selectedIndex].value;this.setSelected(t,"value")}}add(e){const t={data:{},disabled:!1,display:!0,id:String(Math.floor(1e8*Math.random())),innerHTML:"",placeholder:"",selected:!1,text:e.text,value:e.value};this.data.push(t)}search(e){if(this.searchValue=e,""===e.trim())return void(this.filtered=null);const t=this.data.slice(0);e=e.trim().toLowerCase();const i=t.map(t=>{if(t.hasOwnProperty("options")){const i=t,s=i.options.filter(t=>-1!==t.text.toLowerCase().indexOf(e));if(0!==s.length){const e=Object.assign({},i);return e.options=s,e}}return t.hasOwnProperty("text")&&-1!==t.text.toLowerCase().indexOf(e)?t:null});this.filtered=i.filter(e=>e)}pullOptionData(e){return{data:e.dataset,disabled:e.disabled,id:!!e.dataset&&e.dataset.id||String(Math.floor(1e8*Math.random())),innerHTML:e.innerHTML,placeholder:e.dataset.placeholder||null,selected:e.selected,text:e.text,value:e.value}}shouldBeSelected(e,t,i="id"){if(Array.isArray(t)){for(let s=0;s<t.length;s++)if(String(e[i])===String(t[s]))return!0}else if(String(e[i])===String(t))return!0;return!1}},t.validateData=function(e){if(!e)return void console.error("Data must be an array of objects");let t=!1,i=0;for(let n=0;n<e.length;n++)if(e[n].hasOwnProperty("label")){if(e[n].hasOwnProperty("options")){const a=e[n].options;for(let e=0;e<a.length;e++)(t=s(a[e]))||i++}}else(t=s(e[n]))||i++;return 0===i},t.validateOption=s},function(e,t,i){"use strict";function s(e,t){return t&&e&&e.classList&&e.classList.contains(t)?e:null}Object.defineProperty(t,"__esModule",{value:!0}),t.hasClassInTree=function(e,t){return s(e,t)||function e(t,i){return t&&t!==document?s(t,i)?t:e(t.parentNode,i):null}(e,t)},t.ensureElementInView=function(e,t){const i=e.scrollTop+e.offsetTop,s=i+e.clientHeight,n=t.offsetTop,a=n+t.clientHeight;n<i?e.scrollTop-=i-n:a>s&&(e.scrollTop+=a-s)},t.putContent=function(e,t,i){const s=e.offsetHeight,n=e.getBoundingClientRect(),a=i?n.top:n.top-s,l=i?n.bottom:n.bottom+s;return a<=0?"below":l>=window.innerHeight?"above":i?t:"below"},t.debounce=function(e,t=100,i=!1){let s;return function(...n){const a=this,l=i&&!s;clearTimeout(s),s=setTimeout(()=>{s=null,i||e.apply(a,n)},t),l&&e.apply(a,n)}},t.isValueInArrayOfObjects=function(e,t,i){if(Array.isArray(e)){for(let s=0;s<e.length;s++)if(e[s]&&e[s][t]&&e[s][t]===i)return!0;return!1}return e[t]===i},t.highlight=function(e,t,i){const s=new RegExp("(>[^<.]*)("+t.trim()+")([^<.]*)","gi"),n="$1<span "+(i?'class="'+i+'"':"")+'">$2</span>$3';return e.replace(s,n)}},function(e,t,i){"use strict";i(3);const s=i(4);e.exports=s.default},function(e,t){try{var i=new window.CustomEvent("test");if(i.preventDefault(),!0!==i.defaultPrevented)throw new Error("Could not prevent default")}catch(e){var s=function(e,t){var i,s;return t=t||{bubbles:!1,cancelable:!1,detail:void 0},(i=document.createEvent("CustomEvent")).initCustomEvent(e,t.bubbles,t.cancelable,t.detail),s=i.preventDefault,i.preventDefault=function(){s.call(this);try{Object.defineProperty(this,"defaultPrevented",{get:function(){return!0}})}catch(e){this.defaultPrevented=!0}},i};s.prototype=window.Event.prototype,window.CustomEvent=s}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(5),n=i(0),a=i(1),l=i(6),o=i(7);class c{constructor(e){this.ajax=null,this.addable=null,this.beforeOnChange=null,this.onChange=null,this.beforeOpen=null,this.afterOpen=null,this.beforeClose=null,this.afterClose=null,this.validate(e);const t="string"==typeof e.select?document.querySelector(e.select):e.select;t.dataset.ssid&&this.destroy(t.dataset.ssid),e.ajax&&(this.ajax=e.ajax),e.addable&&(this.addable=e.addable),this.config=new s.default({allowDeselect:e.allowDeselect,closeOnSelect:e.closeOnSelect,isAjax:!!e.ajax,isEnabled:e.isEnabled,placeholderText:e.placeholder,searchHighlight:e.searchHighlight,searchPlaceholder:e.searchPlaceholder,searchText:e.searchText,select:t,showContent:e.showContent,showOptionTooltips:e.showOptionTooltips,showSearch:e.showSearch,valuesUseText:e.valuesUseText}),this.select=new l.default({main:this,select:t}),this.data=new n.default({main:this}),this.slim=new o.default({main:this}),this.select.element.parentNode.insertBefore(this.slim.container,this.select.element.nextSibling),e.data?this.setData(e.data):this.render(),document.addEventListener("click",e=>{a.hasClassInTree(e.target,this.config.id)||this.close()}),window.addEventListener("scroll",a.debounce(e=>{this.data.contentOpen&&"auto"===this.config.showContent&&("above"===a.putContent(this.slim.content,this.data.contentPosition,this.data.contentOpen)?this.moveContentAbove():this.moveContentBelow())}),!1),e.beforeOnChange&&(this.beforeOnChange=e.beforeOnChange),e.onChange&&(this.onChange=e.onChange),e.beforeOpen&&(this.beforeOpen=e.beforeOpen),e.afterOpen&&(this.afterOpen=e.afterOpen),e.beforeClose&&(this.beforeClose=e.beforeClose),e.afterClose&&(this.afterClose=e.afterClose)}validate(e){const t="string"==typeof e.select?document.querySelector(e.select):e.select;if(!t)throw new Error("Could not find select element");if("SELECT"!==t.tagName)throw new Error("Element isnt of type select")}selected(){if(this.config.isMultiple){const e=this.data.getSelected(),t=[];for(let i=0;i<e.length;i++)t.push(e[i].value);return t}{const e=this.data.getSelected();return e?e.value:""}}set(e,t="value",i=!0,s=!0){this.config.isMultiple&&!Array.isArray(e)?this.data.addToSelected(e,t):this.data.setSelected(e,t),this.select.setValue(),this.data.onDataChange(),this.render(),i&&this.close()}setSelected(e,t="value",i=!0,s=!0){this.set(e,t,i,s)}setData(e){if(!n.validateData(e))return void console.error("Validation problem on: #"+this.select.element.id);const t=JSON.parse(JSON.stringify(e)),i=this.data.getSelected();if(this.config.isAjax&&i)if(this.config.isMultiple){const e=i.reverse();for(let i=0;i<e.length;i++)t.unshift(e[i])}else t.unshift(this.data.getSelected()),t.unshift({placeholder:!0,text:""});this.select.create(t),this.data.parseSelectData(),this.data.setSelectedFromSelect()}addData(e){if(!n.validateData([e]))return void console.error("Validation problem on: #"+this.select.element.id);const t=this.data.newOption(e);this.data.add(t),this.select.create(this.data.data),this.data.parseSelectData(),this.data.setSelectedFromSelect(),this.render()}open(){if(this.config.isEnabled&&!this.data.contentOpen){if(this.slim.search.input.focus(),this.beforeOpen&&this.beforeOpen(),this.config.isMultiple?this.slim.multiSelected.plus.classList.add("ss-cross"):(this.slim.singleSelected.arrowIcon.arrow.classList.remove("arrow-down"),this.slim.singleSelected.arrowIcon.arrow.classList.add("arrow-up")),this.slim[this.config.isMultiple?"multiSelected":"singleSelected"].container.classList.add("above"===this.data.contentPosition?this.config.openAbove:this.config.openBelow),this.slim.content.classList.add(this.config.open),"up"===this.config.showContent.toLowerCase()?this.moveContentAbove():"down"===this.config.showContent.toLowerCase()?this.moveContentBelow():"above"===a.putContent(this.slim.content,this.data.contentPosition,this.data.contentOpen)?this.moveContentAbove():this.moveContentBelow(),!this.config.isMultiple){const e=this.data.getSelected();if(e){const t=e.id,i=this.slim.list.querySelector('[data-id="'+t+'"]');i&&a.ensureElementInView(this.slim.list,i)}}setTimeout(()=>{this.data.contentOpen=!0,this.afterOpen&&this.afterOpen()},300)}}close(){this.data.contentOpen&&(this.beforeClose&&this.beforeClose(),this.config.isMultiple?(this.slim.multiSelected.container.classList.remove(this.config.openAbove),this.slim.multiSelected.container.classList.remove(this.config.openBelow),this.slim.multiSelected.plus.classList.remove("ss-cross")):(this.slim.singleSelected.container.classList.remove(this.config.openAbove),this.slim.singleSelected.container.classList.remove(this.config.openBelow),this.slim.singleSelected.arrowIcon.arrow.classList.add("arrow-down"),this.slim.singleSelected.arrowIcon.arrow.classList.remove("arrow-up")),this.slim.content.classList.remove(this.config.open),this.data.contentOpen=!1,this.search(""),setTimeout(()=>{this.slim.content.removeAttribute("style"),this.data.contentPosition="below",this.slim[this.config.isMultiple?"multiSelected":"singleSelected"].container.classList.remove(this.config.openAbove),this.slim[this.config.isMultiple?"multiSelected":"singleSelected"].container.classList.remove(this.config.openBelow),this.slim.search.input.blur(),this.afterClose&&this.afterClose()},300))}moveContentAbove(){const e=this.config.isMultiple?this.slim.multiSelected.container.offsetHeight:this.slim.singleSelected.container.offsetHeight,t=e+this.slim.content.offsetHeight-1;this.slim.content.style.margin="-"+t+"px 0 0 0",this.slim.content.style.height=t-e+1+"px",this.slim.content.style.transformOrigin="center bottom",this.data.contentPosition="above",this.slim[this.config.isMultiple?"multiSelected":"singleSelected"].container.classList.remove(this.config.openBelow),this.slim[this.config.isMultiple?"multiSelected":"singleSelected"].container.classList.add(this.config.openAbove)}moveContentBelow(){this.slim.content.removeAttribute("style"),this.data.contentPosition="below",this.slim[this.config.isMultiple?"multiSelected":"singleSelected"].container.classList.remove(this.config.openAbove),this.slim[this.config.isMultiple?"multiSelected":"singleSelected"].container.classList.add(this.config.openBelow)}enable(){this.config.isEnabled=!0,this.config.isMultiple?this.slim.multiSelected.container.classList.remove(this.config.disabled):this.slim.singleSelected.container.classList.remove(this.config.disabled),this.select.disconnectMutationObserver(),this.select.element.disabled=!1,this.slim.search.input.disabled=!1,this.select.observeMutationObserver()}disable(){this.config.isEnabled=!1,this.config.isMultiple?this.slim.multiSelected.container.classList.add(this.config.disabled):this.slim.singleSelected.container.classList.add(this.config.disabled),this.select.disconnectMutationObserver(),this.select.element.disabled=!0,this.slim.search.input.disabled=!0,this.select.observeMutationObserver()}search(e){if(this.data.searchValue!==e)if(this.slim.search.input.value=e,this.config.isAjax)if(""===e.trim())this.setData([]),this.data.search(""),this.render();else{const t=this;this.config.isSearching=!0,this.render(),this.ajax(e,i=>{t.config.isSearching=!1,Array.isArray(i)?(i.unshift({text:"",placeholder:!0}),t.setData(i),t.data.search(e),t.render()):"string"==typeof i?t.slim.options(i):t.render()})}else this.data.search(e),this.render()}setSearchText(e){this.config.searchText=e}render(){this.config.isMultiple?this.slim.values():(this.slim.placeholder(),this.slim.deselect()),this.slim.options()}destroy(e=null){const t=e?document.querySelector("."+e):this.slim.container,i=e?document.querySelector(`[data-ssid=${e}]`):this.select.element;t&&i&&(i.style.display=null,delete i.dataset.ssid,this.select.element.slim=null,t.parentElement&&t.parentElement.removeChild(t))}}t.SlimSelect=c,t.default=c},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.isMultiple=!1,this.id="",this.isAjax=!1,this.isSearching=!1,this.showSearch=!0,this.searchHighlight=!1,this.closeOnSelect=!0,this.showContent="auto",this.searchPlaceholder="Search",this.searchText="No Results",this.placeholderText="Select Value",this.allowDeselect=!1,this.isEnabled=!0,this.valuesUseText=!1,this.showOptionTooltips=!1,this.main="ss-main",this.singleSelected="ss-single-selected",this.arrow="ss-arrow",this.multiSelected="ss-multi-selected",this.add="ss-add",this.plus="ss-plus",this.values="ss-values",this.value="ss-value",this.valueText="ss-value-text",this.valueDelete="ss-value-delete",this.content="ss-content",this.open="ss-open",this.openAbove="ss-open-above",this.openBelow="ss-open-below",this.search="ss-search",this.searchHighlighter="ss-search-highlight",this.addable="ss-addable",this.list="ss-list",this.optgroup="ss-optgroup",this.optgroupLabel="ss-optgroup-label",this.option="ss-option",this.highlighted="ss-highlighted",this.disabled="ss-disabled",this.hide="ss-hide",this.id="ss-"+Math.floor(1e5*Math.random()),this.style=e.select.style.cssText,this.class=e.select.classList,this.isMultiple=e.select.multiple,this.isAjax=e.isAjax,this.showSearch=!1!==e.showSearch,this.searchHighlight=!0===e.searchHighlight,this.closeOnSelect=!1!==e.closeOnSelect,e.showContent&&(this.showContent=e.showContent),this.isEnabled=!1!==e.isEnabled,e.searchPlaceholder&&(this.searchPlaceholder=e.searchPlaceholder),e.searchText&&(this.searchText=e.searchText),e.placeholderText&&(this.placeholderText=e.placeholderText),this.allowDeselect=!0===e.allowDeselect,e.valuesUseText&&(this.valuesUseText=e.valuesUseText),e.showOptionTooltips&&(this.showOptionTooltips=e.showOptionTooltips)}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});t.default=class{constructor(e){this.element=e.select,this.main=e.main,this.element.disabled&&(this.main.config.isEnabled=!1),this.addAttributes(),this.addEventListeners(),this.addMutationObserver(),this.element.slim=e.main}setValue(){if(this.main.data.getSelected()){if(this.main.config.isMultiple){const e=this.main.data.getSelected(),t=this.element.options;for(let i=0;i<t.length;i++){const s=t[i];s.selected=!1;for(let t=0;t<e.length;t++)e[t].value===s.value&&(s.selected=!0)}}else{const e=this.main.data.getSelected();this.element.value=e?e.value:""}this.main.data.isOnChangeEnabled=!1,this.element.dispatchEvent(new CustomEvent("change")),this.main.data.isOnChangeEnabled=!0}}addAttributes(){this.element.tabIndex=-1,this.element.style.display="none",this.element.dataset.ssid=this.main.config.id}addEventListeners(){this.element.addEventListener("change",e=>{this.main.data.setSelectedFromSelect(),this.main.render()})}addMutationObserver(){this.main.config.isAjax||(this.mutationObserver=new MutationObserver(e=>{this.main.data.parseSelectData(),this.main.data.setSelectedFromSelect(),this.main.render()}),this.observeMutationObserver())}observeMutationObserver(){this.mutationObserver.observe(this.element,{attributes:!0,characterData:!0,childList:!0})}disconnectMutationObserver(){this.mutationObserver&&this.mutationObserver.disconnect()}create(e){this.element.innerHTML="";for(let t=0;t<e.length;t++)if(e[t].hasOwnProperty("options")){const i=e[t],s=document.createElement("optgroup");s.label=i.label;for(let e=0;e<i.options.length;e++)s.appendChild(this.createOption(i.options[e]));this.element.appendChild(s)}else this.element.appendChild(this.createOption(e[t]))}createOption(e){const t=document.createElement("option");return t.value=e.value||e.text,t.innerHTML=e.innerHTML||e.text,e.selected&&(t.selected=e.selected),e.disabled&&(t.disabled=!0),e.placeholder&&t.setAttribute("data-placeholder","true"),e.data&&"object"==typeof e.data&&Object.keys(e.data).forEach(i=>{t.setAttribute("data-"+i,e.data[i])}),t}}},function(e,t,i){"use strict";Object.defineProperty(t,"__esModule",{value:!0});const s=i(0),n=i(1);t.default=class{constructor(e){this.main=e.main,this.container=this.containerDiv(),this.content=this.contentDiv(),this.search=this.searchDiv(),this.list=this.listDiv(),this.options(),this.main.config.isMultiple?(this.multiSelected=this.multiSelectedDiv(),this.container.appendChild(this.multiSelected.container)):(this.singleSelected=this.singleSelectedDiv(),this.container.appendChild(this.singleSelected.container)),this.container.appendChild(this.content),this.content.appendChild(this.search.container),this.content.appendChild(this.list)}options(e=""){const t=this.main.data.filtered||this.main.data.data;if(this.list.innerHTML="",""!==e){const t=document.createElement("div");return t.classList.add(this.main.config.option),t.classList.add(this.main.config.disabled),t.innerHTML=e,void this.list.appendChild(t)}if(this.main.config.isAjax&&this.main.config.isSearching){const e=document.createElement("div");return e.classList.add(this.main.config.option),e.classList.add(this.main.config.disabled),e.innerHTML="Searching...",void this.list.appendChild(e)}if(0===t.length){const e=document.createElement("div");return e.classList.add(this.main.config.option),e.classList.add(this.main.config.disabled),e.innerHTML=this.main.config.searchText,void this.list.appendChild(e)}for(let e=0;e<t.length;e++)if(t[e].hasOwnProperty("label")){const i=t[e],s=document.createElement("div");s.classList.add(this.main.config.optgroup);const n=document.createElement("div");n.classList.add(this.main.config.optgroupLabel),n.innerHTML=i.label,s.appendChild(n);const a=i.options;for(let e=0;e<a.length;e++)s.appendChild(this.option(a[e]));this.list.appendChild(s)}else this.list.appendChild(this.option(t[e]))}values(){if(!this.main.config.isMultiple)return;let e=this.multiSelected.values.childNodes;const t=this.main.data.getSelected();let i=!1;const s=[];for(let n=0;n<e.length;n++){i=!0;const a=e[n];for(let e=0;e<t.length;e++)String(t[e].id)===String(a.dataset.id)&&(i=!1);i&&s.push(a)}for(let e=0;e<s.length;e++)s[e].classList.add("ss-out"),this.multiSelected.values.removeChild(s[e]);e=this.multiSelected.values.childNodes;for(let s=0;s<t.length;s++){i=!1;for(let n=0;n<e.length;n++){const a=e[n];String(t[s].id)===String(a.dataset.id)&&(i=!0)}i||(0===e.length?this.multiSelected.values.appendChild(this.valueDiv(t[s])):0===s?this.multiSelected.values.insertBefore(this.valueDiv(t[s]),e[s]):e[s-1].insertAdjacentElement("afterend",this.valueDiv(t[s])))}if(0===t.length){const e=document.createElement("span");e.classList.add(this.main.config.disabled),e.innerHTML=this.main.config.placeholderText,this.multiSelected.values.innerHTML=e.outerHTML}}placeholder(){const e=this.main.data.getSelected();if(null===e||e&&e.placeholder){const e=document.createElement("span");e.classList.add(this.main.config.disabled),e.innerHTML=this.main.config.placeholderText,this.singleSelected.placeholder.innerHTML=e.outerHTML}else{let t="";e&&(t=e.innerHTML&&!0!==this.main.config.valuesUseText?e.innerHTML:e.text),this.singleSelected.placeholder.innerHTML=e?t:""}}deselect(){this.main.config.allowDeselect?""===this.main.selected()?this.singleSelected.deselect.classList.add("ss-hide"):this.singleSelected.deselect.classList.remove("ss-hide"):this.singleSelected.deselect.classList.add("ss-hide")}containerDiv(){const e=document.createElement("div");e.classList.add(this.main.config.id),e.classList.add(this.main.config.main),e.style.cssText=this.main.config.style;for(let t=0;t<this.main.config.class.length;t++)e.classList.add(this.main.config.class[t]);return e}singleSelectedDiv(){const e=document.createElement("div");e.classList.add(this.main.config.singleSelected);const t=document.createElement("span");t.classList.add("placeholder"),e.appendChild(t);let i=null;(i=document.createElement("span")).innerHTML="X",i.classList.add("ss-deselect"),i.onclick=(e=>{this.main.set(""),e.stopPropagation()}),e.appendChild(i);const s=document.createElement("span");s.classList.add(this.main.config.arrow);const n=document.createElement("span");return n.classList.add("arrow-down"),s.appendChild(n),e.appendChild(s),e.onclick=(()=>{this.main.config.isEnabled&&(this.main.data.contentOpen?this.main.close():this.main.open())}),{arrowIcon:{arrow:n,container:s},container:e,deselect:i,placeholder:t}}multiSelectedDiv(){const e=document.createElement("div");e.classList.add(this.main.config.multiSelected);const t=document.createElement("div");t.classList.add(this.main.config.values),e.appendChild(t);const i=document.createElement("div");i.classList.add(this.main.config.add);const s=document.createElement("span");return s.classList.add(this.main.config.plus),s.onclick=(e=>{this.main.data.contentOpen&&(this.main.close(),e.stopPropagation())}),i.appendChild(s),e.appendChild(i),e.onclick=(e=>{this.main.config.isEnabled&&(e.target.classList.contains(this.main.config.valueDelete)||this.main.open())}),{add:i,container:e,plus:s,values:t}}valueDiv(e){const t=document.createElement("div");t.classList.add(this.main.config.value),t.dataset.id=e.id;const i=document.createElement("span");i.classList.add(this.main.config.valueText),i.innerHTML=e.innerHTML&&!0!==this.main.config.valuesUseText?e.innerHTML:e.text,t.appendChild(i);const s=document.createElement("span");return s.classList.add(this.main.config.valueDelete),s.innerHTML="x",s.onclick=(t=>{if(t.preventDefault(),t.stopPropagation(),this.main.config.isEnabled)if(this.main.beforeOnChange){const t=this.main.data.getSelected(),i=JSON.parse(JSON.stringify(t));for(let t=0;t<i.length;t++)i[t].id===e.id&&i.splice(t,1);!1!==this.main.beforeOnChange(i)&&(this.main.data.removeFromSelected(e.id,"id"),this.main.render(),this.main.select.setValue())}else this.main.data.removeFromSelected(e.id,"id"),this.main.render(),this.main.select.setValue(),this.main.data.onDataChange()}),t.appendChild(s),t}contentDiv(){const e=document.createElement("div");return e.classList.add(this.main.config.content),e}searchDiv(){const e=document.createElement("div"),t=document.createElement("input");let i;return e.classList.add(this.main.config.search),this.main.config.showSearch||(e.classList.add(this.main.config.hide),t.readOnly=!0),t.type="search",t.placeholder=this.main.config.searchPlaceholder,t.tabIndex=0,t.onclick=(e=>{setTimeout(()=>{""===e.target.value&&this.main.search("")},10)}),t.onkeydown=(e=>{"ArrowUp"===e.key?(this.main.open(),this.highlightUp(),e.preventDefault()):"ArrowDown"===e.key?(this.main.open(),this.highlightDown(),e.preventDefault()):"Tab"===e.key?this.main.close():"Enter"===e.key&&e.preventDefault()}),t.onkeyup=(e=>{const s=e.target;if("Enter"===e.key){if(this.main.addable&&e.ctrlKey)return i.click(),e.preventDefault(),void e.stopPropagation();const t=this.list.querySelector("."+this.main.config.highlighted);t&&t.click()}else"ArrowUp"===e.key||"ArrowDown"===e.key||("Escape"===e.key?this.main.close():this.main.config.showSearch&&this.main.data.contentOpen?this.main.search(s.value):t.value="");e.preventDefault(),e.stopPropagation()}),t.onfocus=(()=>{this.main.open()}),e.appendChild(t),this.main.addable&&((i=document.createElement("div")).classList.add(this.main.config.addable),i.innerHTML="+",i.onclick=(e=>{e.preventDefault(),e.stopPropagation();const t=this.search.input.value;if(""===t.trim())return void this.search.input.focus();const i=this.main.addable(t);let n="";i&&("object"==typeof i?s.validateOption(i)&&(this.main.addData(i),n=i.value?i.value:i.text):(this.main.addData(this.main.data.newOption({text:i,value:i})),n=i),this.main.search(""),setTimeout(()=>{this.main.set(n,"value",!1,!1)},100),this.main.config.closeOnSelect&&setTimeout(()=>{this.main.close()},100))}),e.appendChild(i)),{addable:i,container:e,input:t}}highlightUp(){const e=this.list.querySelector("."+this.main.config.highlighted);let t=null;if(e)for(t=e.previousSibling;null!==t&&t.classList.contains(this.main.config.disabled);)t=t.previousSibling;else{const e=this.list.querySelectorAll("."+this.main.config.option+":not(."+this.main.config.disabled+")");t=e[e.length-1]}if(t&&t.classList.contains(this.main.config.optgroupLabel)&&(t=null),null===t){const i=e.parentNode;if(i.classList.contains(this.main.config.optgroup)&&i.previousSibling){const e=i.previousSibling.querySelectorAll("."+this.main.config.option+":not(."+this.main.config.disabled+")");e.length&&(t=e[e.length-1])}}t&&(e&&e.classList.remove(this.main.config.highlighted),t.classList.add(this.main.config.highlighted),n.ensureElementInView(this.list,t))}highlightDown(){const e=this.list.querySelector("."+this.main.config.highlighted);let t=null;if(e)for(t=e.nextSibling;null!==t&&t.classList.contains(this.main.config.disabled);)t=t.nextSibling;else t=this.list.querySelector("."+this.main.config.option+":not(."+this.main.config.disabled+")");if(null===t&&null!==e){const i=e.parentNode;i.classList.contains(this.main.config.optgroup)&&i.nextSibling&&(t=i.nextSibling.querySelector("."+this.main.config.option+":not(."+this.main.config.disabled+")"))}t&&(e&&e.classList.remove(this.main.config.highlighted),t.classList.add(this.main.config.highlighted),n.ensureElementInView(this.list,t))}listDiv(){const e=document.createElement("div");return e.classList.add(this.main.config.list),e.onmousewheel=(t=>{const i=e.scrollTop,s=e.scrollHeight,n=e.offsetHeight,a="DOMMouseScroll"===t.type?-40*t.detail:t.wheelDelta,l=a>0,o=()=>(t.stopPropagation(),t.preventDefault(),t.returnValue=!1,!1);return!l&&-a>s-n-i?(e.scrollTop=s,o()):l&&a>i?(e.scrollTop=0,o()):void 0}),e}option(e){if(e.placeholder){const e=document.createElement("div");return e.classList.add(this.main.config.option),e.classList.add(this.main.config.hide),e}const t=document.createElement("div");t.classList.add(this.main.config.option);const i=this.main.data.getSelected();t.dataset.id=e.id,this.main.config.searchHighlight&&this.main.slim&&""!==this.main.slim.search.input.value.trim()?t.innerHTML=n.highlight(e.innerHTML,this.main.slim.search.input.value,this.main.config.searchHighlighter):t.innerHTML=e.innerHTML,this.main.config.showOptionTooltips&&t.setAttribute("title",t.textContent);const s=this;return t.onclick=function(e){e.preventDefault(),e.stopPropagation();const t=this.dataset.id;if(s.main.beforeOnChange){let e;const n=JSON.parse(JSON.stringify(s.main.data.getObjectFromData(t)));n.selected=!0,s.main.config.isMultiple?(e=JSON.parse(JSON.stringify(i))).push(n):e=JSON.parse(JSON.stringify(n)),!1!==s.main.beforeOnChange(e)&&s.main.set(t,"id",s.main.config.closeOnSelect)}else s.main.set(t,"id",s.main.config.closeOnSelect)},(e.disabled||i&&n.isValueInArrayOfObjects(i,"id",e.id))&&(t.onclick=null,t.classList.add(this.main.config.disabled)),t}}}])});